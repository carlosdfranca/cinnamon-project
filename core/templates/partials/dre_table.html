{% load custom_tags %}

<!-- Tabela DRE - layout original adaptado para datas -->
<table class="table table-bordered table-sm mt-2 align-middle">
  <thead class="table-light">
    <tr>
      <th style="width: 80%">Descrição</th>
      <th style="width: 10%" class="text-end">{{ data_atual|date:"d/m/Y" }}</th>
      <th style="width: 10%" class="text-end">{{ data_anterior|date:"d/m/Y" }}</th>
    </tr>
  </thead>
  <tbody>
    {% for grupo, valores in dre_tabela.items %}
      <!-- Linha do grupo principal -->
      <tr class="table-secondary fw-bold">
        <td colspan="1">{{ grupo }}</td>
        <td class="text-end">{{ valores.SOMA|formata_milhar }}</td>
        <td class="text-end">{{ valores.SOMA_ANTERIOR|formata_milhar }}</td>
      </tr>

      <!-- Subgrupos -->
      {% for subgrupo, val in valores.items %}
        {% if subgrupo != 'SOMA' and subgrupo != 'SOMA_ANTERIOR' %}
          <tr>
            <td>{{ subgrupo }}</td>
            <td class="text-end">{{ val.ATUAL|formata_milhar }}</td>
            <td class="text-end">{{ val.ANTERIOR|formata_milhar }}</td>
          </tr>
        {% endif %}
      {% endfor %}

      <!-- Linha separadora -->
      <tr class="border-top">
        <td colspan="3" style="background-color: #F7F3E3; border-left: none; border-right: none;"></td>
      </tr>
    {% endfor %}

    <!-- Resultado do exercício -->
    <tr class="table-secondary fw-bold">
      <td>Resultado do exercício</td>
      <td class="text-end">{{ resultado_exercicio|formata_milhar }}</td>
      <td class="text-end">{{ resultado_exercicio_anterior|formata_milhar }}</td>
    </tr>
  </tbody>
</table>
